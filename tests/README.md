# Docker Compose Validation Tests

This directory contains tests to validate the Docker Compose files generated by this application.

## Tests Overview

The tests perform the following validations:

1. **Individual Service Validation**: Tests each service individually to ensure the Docker Compose configuration for each service is valid.
2. **Combined Services Validation**: Tests all services together to ensure they work properly when combined in a single Docker Compose file.
3. **Container Schema Validation**: Tests that all container definitions meet the required schema and use proper environment variables.

## Running the Tests

To run the tests, you need Docker installed on your system and [Bun](https://bun.sh/) as the JavaScript runtime.

### Using Bun (Recommended)

```bash
# Run all tests
bun test

# Run only Docker Compose validation
bun test:compose

# Run only container schema validation
bun test:containers
```

### Using npm/pnpm

```bash
# Run all tests
npm test

# Run only Docker Compose validation
npm run test:compose

# Run only container schema validation
npm run test:containers
```

## Test Requirements

- Docker must be installed and running on your system
- Docker Compose V2 must be available (comes with Docker Desktop or can be installed separately)
- [Bun](https://bun.sh/) for running the tests (provides much faster execution than node or ts-node)

## Test Results

The test suite will output:
- Results for each individual service test
- Results for combined services test
- Schema validation results for all containers

## What's Being Tested

The Docker Compose validation tests:
1. Generate a Docker Compose file with the service(s) configuration
2. Create an environment file with default settings
3. Run `docker compose config` to validate the syntax and structure

The container schema validation tests:
1. Validate each container definition against the required schema
2. Check that proper environment variables are being used
3. Verify that hardcoded values aren't used for common environment variables

This ensures that all Docker Compose files generated by the application are valid and follow best practices. 